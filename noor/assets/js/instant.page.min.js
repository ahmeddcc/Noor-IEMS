/*! instant.page v5.2.0 - (C) 2019-2023 Alexandre Dieulot - https://instant.page/license */
let defined, defined2, defined3, defined4, defined5; const defined6 = Object.assign; let defined7, defined8, defined9, defined10, defined11, defined12, defined13; const defined14 = new Set; const defined15 = document.documentElement.dataset; const defined16 = 'instantVaryAccept' in defined15; const defined17 = 'instantWhitelist' in defined15; const defined18 = 'instantAllowQueryString' in defined15; const defined19 = 'instantAllowExternalLinks' in defined15; const defined20 = 'instantMousedownShortcut' in defined15; const defined21 = 65; const defined22 = 1111; let defined23 = defined21; let defined24 = defined22; const defined25 = 'instantIntensity' in defined15; if (defined25) { const e = defined15.instantIntensity; if (e.substr(0, 'mousedown'.length) == 'mousedown') { defined = true; if (e == 'mousedown-only') { defined2 = true } } else if (e.substr(0, 'viewport'.length) == 'viewport') { if (!(e == 'viewport')) { const t = +e.substr('viewport-'.length); if (!isNaN(t)) { defined23 = t } } defined3 = true } else { const t = +e; if (!isNaN(t)) { defined24 = t } } } if (!defined2) { if (!defined3) { let e = null; const t = function (t) { if (defined24) { defined8 = +new Date } const n = t.target.closest('a'); if (!shouldPreload(n)) { return } n.addEventListener('mouseout', mouseoutListenerWithThrottling, { passive: true }); defined7 = n; defined9 = setTimeout(preload, defined24) }; const n = function (t) { if (defined6(t.target, 'closest') == null) { return } const n = t.target.closest('a'); if (!shouldPreload(n)) { return } n.addEventListener('mouseout', mouseoutListenerWithThrottling, { passive: true }); preload(n) }; const o = function (e) { if (defined6(e.target, 'closest') == null) { return } const t = e.target.closest('a'); if (!shouldPreload(t)) { return } linkElement(t) }; const a = function () { if (e) { document.body.removeEventListener('mouseover', e, { capture: true, passive: true }) } document.body.addEventListener('mouseover', n, { capture: true, passive: true }); e = n }; if ('connection' in navigator && navigator.connection.saveData) { return } let i = false; if ('connection' in navigator) { if (navigator.connection.effectiveType.includes('2g')) { return } i = navigator.connection.effectiveType.includes('4g') } if (i) { a() } else { document.body.addEventListener('mouseover', t, { capture: true, passive: true }); e = t } if (defined) { document.body.addEventListener('mousedown', o, { capture: true, passive: true }) } if (defined20) { document.body.addEventListener('mousedown', o, { capture: true, passive: true }) } let r = null; if (defined3) { let e; e = function () { if (r) { r.disconnect() } r = new IntersectionObserver((t => { t.forEach((t => { if (t.isIntersecting) { const n = t.target; r.unobserve(n); preload(n) } })) }), { rootMargin: `${defined23}px` }); document.querySelectorAll('a').forEach((t => { if (shouldPreload(t)) { r.observe(t) } })) }; e(); new MutationObserver((t => { t.forEach((t => { t.addedNodes.forEach((t => { if (t.nodeType == 1) { if (t.tagName == 'A') { if (shouldPreload(t)) { r.observe(t) } } else { t.querySelectorAll && t.querySelectorAll('a').forEach((t => { if (shouldPreload(t)) { r.observe(t) } })) } } })) })) })).observe(document.body, { childList: true, subtree: true }) } } } const mouseoutListenerWithThrottling = function (e) { if (e.relatedTarget && e.target.closest('a') == e.relatedTarget.closest('a')) { return } if (defined9) { clearTimeout(defined9); defined9 = null } }; const shouldPreload = function (e) { if (e && e.href && (!defined17 || 'instant' in e.dataset) && (defined19 || e.origin == location.origin || 'instant' in e.dataset) && ['http:', 'https:'].includes(e.protocol) && (e.protocol != 'http:' || location.protocol != 'https:') && (defined18 || !e.search || 'instant' in e.dataset) && !(e.hash && e.pathname + e.search == location.pathname + location.search || 'noInstant' in e.dataset)) { return true } return false }; const preload = function (e) { if (!e) { e = defined7 } if (defined14.has(e.href)) { return } defined14.add(e.href); linkElement(e) }; const linkElement = function (e) { const t = document.createElement('link'); t.rel = 'prefetch'; t.href = e.href; if (defined16 && !!e.href.match(RegExp('\\.' + defined15.defined16 + '$'))) { t.as = 'document' } document.head.appendChild(t) };
